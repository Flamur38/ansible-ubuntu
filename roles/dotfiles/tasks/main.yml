---
# ==================================================
# Dotfiles deployment
# ==================================================

- name: Ensure home directory exists
  ansible.builtin.file:
    path: "/home/{{ ansible_env.SUDO_USER }}"
    state: directory
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0755"

- name: Deploy bashrc
  ansible.builtin.copy:
    src: bashrc
    dest: "/home/{{ ansible_env.SUDO_USER }}/.bashrc"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"

- name: Deploy bash_aliases
  ansible.builtin.copy:
    src: bash_aliases
    dest: "/home/{{ ansible_env.SUDO_USER }}/.bash_aliases"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"

- name: Deploy bash_profile
  ansible.builtin.copy:
    src: bash_profile
    dest: "/home/{{ ansible_env.SUDO_USER }}/.bash_profile"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"

- name: Deploy profile
  ansible.builtin.copy:
    src: profile
    dest: "/home/{{ ansible_env.SUDO_USER }}/.profile"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"

- name: Deploy xinitrc
  ansible.builtin.copy:
    src: xinitrc
    dest: "/home/{{ ansible_env.SUDO_USER }}/.xinitrc"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"

- name: Deploy xprofile
  ansible.builtin.copy:
    src: xprofile
    dest: "/home/{{ ansible_env.SUDO_USER }}/.xprofile"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"

- name: Deploy Xresources
  ansible.builtin.copy:
    src: Xresources
    dest: "/home/{{ ansible_env.SUDO_USER }}/.Xresources"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"

- name: Deploy zshrc
  ansible.builtin.copy:
    src: zshrc
    dest: "/home/{{ ansible_env.SUDO_USER }}/.zshrc"
    owner: "{{ ansible_env.SUDO_USER }}"
    group: "{{ ansible_env.SUDO_USER }}"
    mode: "0644"
