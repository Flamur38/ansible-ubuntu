# --------------------------------------------------
# GNOME Terminal â€“ configure DEFAULT profile only
# --------------------------------------------------

# Get default GNOME Terminal profile UUID
- name: Get default GNOME Terminal profile UUID
  become: false
  command: gsettings get org.gnome.Terminal.ProfilesList default
  register: terminal_default_profile
  changed_when: false

- name: Set default profile UUID fact
  set_fact:
    terminal_profile_uuid: "{{ terminal_default_profile.stdout | trim | trim(\"'\") }}"

# --------------------------------------------------
# Global terminal settings
# --------------------------------------------------

- name: Disable terminal menubar
  become: false
  command: >
    gsettings set org.gnome.Terminal.Legacy.Settings default-show-menubar false

# --------------------------------------------------
# Profile settings
# --------------------------------------------------

- name: Disable terminal bell
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    audible-bell false

- name: Enable custom font
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    use-system-font false

- name: Set font to Monospace 15
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    font 'Monospace 15'

- name: Disable theme colors
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    use-theme-colors false

- name: Set terminal foreground color
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    foreground-color '#D3D7CF'

- name: Set terminal background color
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    background-color '#1E1E1E'

# Cursor color needs this flag
- name: Enable cursor colors
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    cursor-colors-set true

- name: Set cursor color (Ubuntu orange)
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    cursor-background-color '#E95420'

- name: Set Ubuntu/Yaru color palette
  become: false
  command: >
    gsettings set
    org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:{{ terminal_profile_uuid }}/
    palette "['#2E3436', '#EF2929', '#8AE234', '#FCE94F', '#729FCF', '#AD7FA8',
              '#34E2E2', '#EEEEEC', '#555753', '#CC0000', '#73D216', '#EDD400',
              '#3465A4', '#75507B', '#06989A', '#D3D7CF']"

